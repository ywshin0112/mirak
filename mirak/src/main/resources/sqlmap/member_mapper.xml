<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="kr.co.mirak.member.MemberMapper">
  	<select id="login" parameterType="member" resultType="member">
  		<![CDATA[
 			SELECT MEM_ID FROM MEMBER WHERE MEM_ID=#{mem_id} AND MEM_PW=#{mem_pw}
 		]]>	
	</select>
 	<insert id="createUser" parameterType="member">
 		<![CDATA[
	 		INSERT INTO MEMBER (MEM_ID, MEM_PW , MEM_NAME, MEM_AGE, MEM_GENDER ,MEM_PHONE, MEM_ADD1, MEM_ADD2, MEM_ZIPCODE)
	 		VALUES(#{mem_id}, #{mem_pw}, #{mem_name} , #{mem_age} , #{mem_gender} , #{mem_phone} , #{mem_add1} , #{mem_add2} , #{mem_zipcode})
 		]]>	
 	</insert>
	
	<update id="memupdate" parameterType="kr.co.mirak.member.MemberVO">
		<![CDATA[
			UPDATE MEMBER SET
				MEM_NAME = #{mem_name},
				MEM_AGE = #{mem_age},
				MEM_GENDER = #{mem_gender},
				MEM_PHONE = #{mem_phone}
			WHERE MEM_ID = #{mem_id}
		]]>
	</update>


 	<select id="getMemberList" resultType="member" parameterType="Int">
		<![CDATA[
			SELECT MEM_ID, MEM_NAME, MEM_AGE, MEM_GENDER, MEM_PHONE, MEM_REGDATE FROM MEMBER
			ORDER BY MEM_REGDATE
			LIMIT 10 OFFSET #{page}
		]]>	
	</select>
	
 	<select id="getMemberInfo" parameterType="String" resultType="member" >
		<![CDATA[
			SELECT MEM_ID, MEM_NAME, MEM_AGE, MEM_GENDER, MEM_PHONE, MEM_REGDATE FROM MEMBER
			WHERE MEM_ID=#{myid}
		]]>	
	</select>
	
	<!-- 아이디 확인 -->
	<select id="idCheck" parameterType="kr.co.mirak.member.MemberVO" resultType="int">
		SELECT count(*) FROM MEMBER WHERE mem_id= #{mem_id}
	</select>
	
	
	
	
	
	<!-- 회원탈퇴 -->
	<delete id="memdelete" parameterType="kr.co.mirak.member.MemberVO">
		<![CDATA[
			DELETE FROM MEMBER
			WHERE MEM_ID = #{mem_id} and MEM_PW = #{mem_pw}
		]]>
	</delete>
	
	
	
	<!-- 아이디, 비번 확인 -->
	<select id="memberCheck" parameterType="kr.co.mirak.member.MemberVO" resultType="int">
		SELECT count(*) FROM MEMBER 
		WHERE mem_id= #{mem_id} 
		and mem_pw=#{mem_pw}
	</select>

	
	
	
	
	<!-- 김원중이 건드린 부분 -->
	
	<select id="getTotal" resultType="int">
	
	<![CDATA[
		select count(*) from member
		]]>
	
	</select>
	
	<select id="getListPaging"
		resultType="member">
		
		<![CDATA[  		 
		select * from (select * from member) as T1 ORDER BY MEM_REGDATE limit #{skip},#{amount}
 		]]>

	</select>
	
	<select id="getMemberDetail"
		resultType="member">
		<![CDATA[
			select * from member where mem_id = #{mem_id}		
		]]>
	</select>


	
	<!-- 여기까지 -->
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
<!--  	<insert id="insert" parameterType="org.sp.mybatis.Emp"> -->
<!--  		insert into emp2 (empno, ename, deptno, job, sal) -->
<!--  		values (#{empno}, #{ename}, #{deptno}, #{job}, #{sal}) -->
<!--  	</insert> -->
<!--  	<resultMap type="kr.co.mirak.member.MemberVO" id="memberList"> -->
<!-- 		<result property="mem_id" column="MEM_ID"/> -->
<!-- 		<result property="mem_pw" column="MEM_PW"/> -->
<!-- 		<result property="mem_name" column="MEM_NAME"/> -->
<!-- 		<result property="mem_age" column="MEM_AGE"/> -->
<!-- 		<result property="mem_gender" column="MEM_GENDER"/> -->
<!-- 		<result property="mem_phone" column="MEM_PHONE"/> -->
<!-- 		<result property="mem_token" column="MEM_TOKEN"/> -->
<!-- 		<result property="mem_regdate" column="MEM_REGDATE"/> -->
<!-- 	</resultMap> -->

 </mapper>