<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.mirak.pay.paymethod.KakaoMapper">

	<insert id="insertOrder">
		<![CDATA[
		insert into order_table (mem_id, pro_code, pro_name, pro_price, pro_desc, pro_image, cart_cnt, totalPrice, group_id, cart_day, cart_start, pay_req, tid, pay_type, cart_code)
		values(#{mem_id}, #{pro_code}, #{pro_name}, #{pro_price}, #{pro_desc}, #{pro_image}, #{cart_cnt}, #{totalPrice}, #{group_id}, #{cart_day}, #{cart_start}, #{pay_req}, #{tid}, #{pay_type}, #{cart_code})
		
		
		]]>
	</insert>


	<select id="selectTid" resultType="kr.co.mirak.pay.paymethod.PayKakaoVO">
		
		<![CDATA[
 		select tid, group_id, mem_id from order_table where order_id= (select max(order_id) from order_table where mem_id=#{mem_id});
		
 		]]>

	</select>
	
	
	<delete id="kakaoCancel">
		
		<![CDATA[
 		delete from order_table where group_id= 
 		(select group_id from order_table where order_id= (select max(order_id) from order_table where mem_id=#{mem_id}))
		
 		]]>

	</delete>



</mapper>